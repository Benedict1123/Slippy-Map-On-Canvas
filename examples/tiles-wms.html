<!DOCTYPE html>
<html manifest="map.manifest">
	<head>
		<meta charset="utf-8">
		<title>Slippy Map on Canvas (HTML5) | WMS sample | Topography and Bathymetry</title>
		<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;"/>
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<link rel="apple-touch-icon-precomposed" href="../images/touch-icon.png" />
		<link href="../css/map.css" rel="stylesheet" type="text/css" media="all" />
		<link href="../css/ui.css" rel="stylesheet" type="text/css" media="all" />
		<style  type="text/css">
			#copyright {
				position: absolute;
				bottom: 0px;
				left: 0px;
				padding: 5px;
				color:	#fff;
				text-shadow: #000 1px 1px 3px;
				-webkit-text-shadow: rgba(0,0,0,0.5) 1px 1px 3px;
				font: 10px/1 Arial, sans-serif;
			}
		</style>
		<script src="../js/map.ui.geolocation.js" type="text/javascript"></script>
		<script src="../js/map.js" type="text/javascript"></script>
		<script type="text/javascript">
			var app = app || {};
			app.tileprovider = function (x, y, z) {
											var bBoxLongLeft, bBoxLongRight, 
											function tile2long (x,z) {
												return (x/Math.pow(2,z)*360-180);
											}
											
											function tile2lat (y,z) {
												var n=Math.PI-2*Math.PI*y/Math.pow(2,z);
												return (180/Math.PI*Math.atan(0.5*(Math.exp(n)-Math.exp(-n))));
											}
											var bbox = [tile2long(x,z), tile2lat(y+1,z), tile2long(x+1,z), tile2lat(y,z)];
											var url="http://viz.globe.gov/viz-bin/wmt.cgi?";
											url+="request=GetMap";
											url+="&service=wms";
											url+="&version=1.1.0";
											url+="&layers=COASTLINES,NATIONAL,RTOPO";
											url+="&styles=";
											url+="&format=image/gif";
//											url+="&bgcolor=0xffffff";
//											url+="&transparent=false";
											url+="&srs=EPSG:4326"; //54004??
											url+="&bbox="+bbox.join(",");
											url+="&width=256";
											url+="&height=256";
//											url+="&reaspect=false";
											console.log(url);
											return url;
			}
		</script>
	</head>
	<body>
		<canvas id="map">
			Your  browser doesn't support canvas elements.			
		</canvas>
		<ul id="buttons">
			<li><a class="zoomin" href="javascript:;" onclick="app.zoomIn(); return false;">+</a></li>
			<li><a class="zoomout" href="javascript:;" onclick="app.zoomOut(); return false;">-</a></li>
		</ul>
		<div id="copyright">Dat by NASA</div>
	</body>
</html>